<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>متجر الحدث موبايل</title>
    <style>
        /* بعض التنسيقات الأساسية */
        body {
            font-family: Arial, sans-serif;
            direction: rtl;
            margin: 20px;
        }
        #search-bar {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            margin-bottom: 20px;
        }
        .brands-container {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            margin-bottom: 20px;
        }
        .brand {
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            cursor: pointer;
            border-radius: 8px;
            white-space: nowrap;
            user-select: none;
        }
        .brand.active {
            background-color: #0056b3;
        }
        .products-container {
            display: grid;
            grid-template-columns: repeat(auto-fill,minmax(180px,1fr));
            gap: 15px;
        }
        .product-card {
            border: 1px solid #ddd;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }
        .product-card img {
            max-width: 100%;
            height: auto;
            border-radius: 4px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

    <input type="text" id="search-bar" placeholder="ابحث عن منتج..." />

    <div class="brands-container" id="brands-container">
        <!-- البراندات ستضاف هنا -->
    </div>

    <div class="products-container" id="products-container">
        <!-- المنتجات ستعرض هنا -->
    </div>

<script>
    // بيانات براندات مع منتجاتهم (مثال)
    const data = {
        Samsung: [
            {name: "Samsung A06 64G", image: "https://example.com/samsung_a06_64g.jpg", price: "49JD"},
            {name: "Samsung A06 128G", image: "https://example.com/samsung_a06_128g.jpg", price: "59JD"},
        ],
        Apple: [
            {name: "iPhone 16 Pro Max", image: "https://example.com/iphone16promax.jpg", price: "1200JD"},
            {name: "iPhone 14", image: "https://example.com/iphone14.jpg", price: "800JD"},
        ],
        Xiaomi: [
            {name: "Xiaomi Redmi Note 11", image: "https://example.com/xiaomi_note11.jpg", price: "200JD"},
        ],
    };

    const brandsContainer = document.getElementById('brands-container');
    const productsContainer = document.getElementById('products-container');
    const searchBar = document.getElementById('search-bar');

    // عرض البراندات في الأعلى
    function showBrands() {
        for (let brand in data) {
            const brandDiv = document.createElement('div');
            brandDiv.textContent = brand;
            brandDiv.classList.add('brand');
            brandDiv.addEventListener('click', () => {
                setActiveBrand(brandDiv);
                showProducts(brand);
            });
            brandsContainer.appendChild(brandDiv);
        }
    }

    // تحديد البراند المختار وتغيير اللون
    function setActiveBrand(selectedBrandDiv) {
        const allBrands = document.querySelectorAll('.brand');
        allBrands.forEach(b => b.classList.remove('active'));
        selectedBrandDiv.classList.add('active');
    }

    // عرض المنتجات حسب البراند
    function showProducts(brand) {
        productsContainer.innerHTML = '';
        const products = data[brand];
        if (!products) return;
        products.forEach(product => {
            const productCard = document.createElement('div');
            productCard.classList.add('product-card');

            productCard.innerHTML = `
                <img src="${product.image}" alt="${product.name}" />
                <h4>${product.name}</h4>
                <p>السعر: ${product.price}</p>
            `;

            productsContainer.appendChild(productCard);
        });
    }

    // البحث عن منتج داخل كل البراندات
    function searchProducts(keyword) {
        productsContainer.innerHTML = '';
        keyword = keyword.trim().toLowerCase();

        if (keyword === '') {
            // اذا كان البحث فارغ، إظهار أول براند تلقائيا
            const firstBrand = document.querySelector('.brand');
            if(firstBrand) {
                setActiveBrand(firstBrand);
                showProducts(firstBrand.textContent);
            }
            return;
        }

        // البحث داخل جميع المنتجات
        const allProducts = [];
        for (let brand in data) {
            allProducts.push(...data[brand].map(p => ({...p, brand})));
        }

        const filtered = allProducts.filter(product => product.name.toLowerCase().includes(keyword));

        if (filtered.length === 0) {
            productsContainer.innerHTML = '<p>لم يتم العثور على منتجات.</p>';
            return;
        }

        // إزالة تمييز البراند عند البحث
        const allBrands = document.querySelectorAll('.brand');
        allBrands.forEach(b => b.classList.remove('active'));

        filtered.forEach(product => {
            const productCard = document.createElement('div');
            productCard.classList.add('product-card');

            productCard.innerHTML = `
                <img src="${product.image}" alt="${product.name}" />
                <h4>${product.name}</h4>
                <p>السعر: ${product.price}</p>
                <p>براند: ${product.brand}</p>
            `;

            productsContainer.appendChild(productCard);
        });
    }

    // حدث عند كتابة شيء في مربع البحث
    searchBar.addEventListener('input', (e) => {
        searchProducts(e.target.value);
    });

    // عرض البراندات والمنتجات أول مرة عند تحميل الصفحة
    showBrands();
    // عرض أول براند بشكل افتراضي
    const firstBrand = document.querySelector('.brand');
    if (firstBrand) {
        setActiveBrand(firstBrand);
        showProducts(firstBrand.textContent);
    }

</script>
</body>
</html>
